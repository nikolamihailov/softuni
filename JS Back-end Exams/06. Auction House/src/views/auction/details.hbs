<main>

    <!-- In case of error, display the following div-->

    {{#if errors}}
    {{#each errors}}
    <div class="error-box">
        <p>{{this}}</p>
    </div>
    {{/each}}
    {{/if}}


    <!-- Details Page -->
    <section id="catalog-section">

        <h1 class="item">
            {{auction.title}}
        </h1>
        <div class="item padded">

            <div class="layout right large">

                <div class="col">
                    <img src="{{auction.image}}" class="img-large">
                </div>

                <div class="content pad-med">

                    <p>In category: <strong>{{auction.category}}</strong></p>
                    <p>{{auction.description}}</p>

                    <div class="align-center">
                        <div>
                            Current price: $<strong>{{auction.price}}</strong>
                        </div>
                        {{#if isAuthenticated}}
                        {{#if isTopBidder}}
                        <!-- If current user is the bidder -->
                        <div>
                            You are currently the <strong>highest bidder</strong> for this auction
                        </div>
                        {{else}}
                        <!-- If current user can place a bid -->
                        <form class="vertical" method="POST" action="/auctions/{{auction._id}}/bid">
                            <label><span>Bid amount</span><input type="number" name="bidAmount"></label>
                            <input class="action" type="submit" value="Place bid">
                        </form>
                        {{/if}}
                        {{/if}}
                    </div>
                </div>
            </div>

            <footer>Listed by {{author}}</footer>
        </div>

    </section>

</main>